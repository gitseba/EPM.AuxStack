<UserControl x:Class="LogProcessor.Wpf.Views.DisplayView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
				 mc:Ignorable="d"
				 xmlns:local="clr-namespace:LogProcessor.Wpf.Views"
				 xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
				 xmlns:converters="clr-namespace:LogProcessor.Wpf.Converters"
				 xmlns:attached="clr-namespace:LogProcessor.Wpf.Attached"
				 xmlns:prism="http://prismlibrary.com/"
				 prism:ViewModelLocator.AutoWireViewModel="True">
	
	<b:Interaction.Triggers>
		<b:EventTrigger EventName="Loaded">
			<b:CallMethodAction TargetObject="{Binding}"
									  MethodName="InitialLoad" />
		</b:EventTrigger>
	</b:Interaction.Triggers>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<Grid Grid.Row="1">

			<StackPanel Panel.ZIndex="99"
							HorizontalAlignment="Center"
							Opacity="0.9"
							VerticalAlignment="Center">
				<Button FontSize="28"
						  Tag="{DynamicResource fa-files-o}"
						  Style="{StaticResource Btn_IconStyle}"
						  Command="{Binding CancelLoadingCommand}"
						  Visibility="{Binding IsLoading, Converter={converters:BooleanIsTrueVisibilityConverter}}"
						  attached:IsBusyProperty.Value="{Binding IsLoading}"
						  Template="{StaticResource Btn_IconTemplate}">
				</Button>
			</StackPanel>

			<RichTextBox x:Name="ConsoleOutput"
							 attached:BoundTextProperty.Value="{Binding FlowDocument, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
							 VerticalScrollBarVisibility="Auto"
							 HorizontalScrollBarVisibility="Auto"
							 IsReadOnly="True"
							 Background="Black"
							 Foreground="White"
							 FontFamily="Consolas"
							 FontSize="12"
							 AcceptsReturn="True" />
		</Grid>
	</Grid>
</UserControl>
